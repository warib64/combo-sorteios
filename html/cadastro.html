<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@200;500;600;800&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="../imagens/favicon.svg">
    <title>Combo Sorteios</title>
    <link rel="stylesheet" href="../css/cadastrostyle.css">
</head>
<body>
    <h1><i>Combo</i> Sorteios</h1>
    <section>
		<h2>Cadastro</h2>
		<div>
			<div id="msg"></div>
			<form id="cadastrar" action="../php/cadastroquery.php" method="post">
				<div class="campo">
					<label for="nome">Nome:</label>
					<input type="text" autocomplete="name" name="nome" id="nome" class="input">
				</div>
				<div class="campo">
					<label for="maioridade">Você é maior de idade (18+)?</label>
					<input type="checkbox" id="maioridade" class="checkbox" name="maioridade">
				</div>
				<div class="campo required">
					<label for="documento">CPF/CNPJ:</label>
					<input type="text" autocomplete="off" name="documento" id="documento" class="input" pattern="(?=(?:[^\d]*\d){11})[0-9.\-]*" required>
				</div>
				<div class="campo required">
					<label for="email">E-mail:</label>
					<input type="email" autocomplete="email" name="email" id="email" class="input" required>
				</div>
				<div class="campo required">
					<label for="senha">Senha:</label>
					<input type="password" name="senha" id="senha" class="input" required>
				</div>
				<input id="enviar" type="submit" class="button" value="Cadastrar-se">
			</form>
		</div>
        <span>
			<p id="pergunta">Já possui uma conta?</p>
			<a href="login.html" class="button" id="linkcadastro">Entrar</a>
        </span>
    </section>
    <a href="../index.html" class="button" id="paginic">Voltar ao início</a>
<script>
    function exibirMsg(mensagem) {
        let erroElemento = document.getElementById('msg');
        erroElemento.innerHTML = `<p>${mensagem}</p>`;
    };
	
	const checagem = new URLSearchParams(window.location.search);
	let grande = checagem.get("lengtherror");
	if (grande != null) {
		switch (grande) {
			case 'nome':
				exibirMsg("Nome excede o limite de caracteres.");
				break;
			case 'email':
				exibirMsg("E-mail excede o limite de caracteres.");
				break;
			case 'documento':
				exibirMsg("CPF/CNPJ excede o limite do formato padrão.");
				break;
		}
    } else if (checagem.has('error')) {
		exibirMsg("Credenciais inválidas ou já existentes.");
	}
</script>
</body>
</html>
